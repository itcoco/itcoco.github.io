<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>放大镜</title>
<style>
* { margin:0; padding:0; }
#div1, #div2 { overflow:hidden; position:relative; float:left; margin:50px; width:310px; height:310px; }
#div1 { background:url(images/m1.jpg) no-repeat; }
#div2 { display:none; }
span { display:none; position:absolute; top:0; left:0; width:100px; height:100px; background:yellow; opacity:0.3; }
img { position:absolute; top:0; left:0;width:900px;height:900px; }
</style>
<script src="jquery-1.7.2.js"></script>
<script>
$(function(){
	
	var oSpan=$('#span1');
	var oDiv1=$('#div1');
	var oDiv2=$('#div2');
	var oImg=$('#img1');
	var maxLeft=oDiv1.width()-oSpan.width();
	var maxTop=oDiv1.height()-oSpan.height();
	//jquery想要获取值 css必须要有默认值  img
	var maxImgLeft=oImg.width()-oDiv2.width();
	var maxImgTop=oImg.height()-oDiv2.height();
	oDiv1.hover(function(ev){
		oSpan.show();
		oDiv2.show();
		
	},function(){
	
		oSpan.hide();
		oDiv2.hide();
	})
	
	oDiv1.mousemove(function(ev){
		
		var left=ev.clientX-oDiv1.offset().left-oSpan.width()/2; 
		var top=ev.clientY-oDiv1.offset().top-oSpan.height()/2;
		
		if(left<0)
		{
			left=0;
		}
		else if(left>maxLeft)
		{
			left=maxLeft;
		}
		
		if(top<0)
		{
			top=0;
		}
		else if(top>maxTop)
		{
			top=maxTop;
		}
		var imgLeft=left/maxLeft*maxImgLeft;
		var imgTop=top/maxTop*maxImgTop;
		oSpan.css({left:left+'px',top:top+'px'})
		oImg.css({left:-imgLeft+'px',top:-imgTop+'px'})
	})
	
})
</script>
</head>

<body>
	<div id="div1">
		<span id="span1"></span>
	</div>
	<div id="div2">
		<img src="images/b1.jpg" id="img1" />
	</div>
</body>
</html>













